
<!-- src/views/change-password.ejs -->
<section class="auth-card">
  <div class="auth-logo">
    <img src="/img/logo.png" alt="Connect Health" class="auth-logo__img">
  </div>

  <h1 class="auth-title">Trocar senha</h1>

  <% if (typeof erro !== 'undefined' && erro) { %>
    <div class="auth-alert"><%= erro %></div>
  <% } %>

  <form method="post" action="/change-password" class="auth-form">
    <label class="auth-field auth-field--password">
      <span>Senha atual</span>
      <div class="auth-password">
        <input type="password" name="currentPassword" required autocomplete="current-password" id="currentPassword">
        <button type="button" class="auth-show" onclick="togglePassword('currentPassword', this)">Mostrar</button>
      </div>
    </label>

    <label class="auth-field auth-field--password">
      <span>Nova senha</span>
      <div class="auth-password">
        <input type="password" name="newPassword" required id="newPassword" autocomplete="new-password">
        <button type="button" class="auth-show" onclick="togglePassword('newPassword', this)">Mostrar</button>
      </div>
    </label>

    <label class="auth-field auth-field--password">
      <span>Confirmar nova senha</span>
      <div class="auth-password">
        <input type="password" name="confirmPassword" required id="confirmPassword" autocomplete="new-password">
        <button type="button" class="auth-show" onclick="togglePassword('confirmPassword', this)">Mostrar</button>
      </div>
    </label>

    <button class="btn auth-submit" type="submit">Salvar nova senha</button>
  </form>
</section>

<script>
function togglePassword(id, btn){
  const input = document.getElementById(id);
  const show = input.type === 'password';
  input.type = show ? 'text' : 'password';
  btn.innerText = show ? 'Ocultar' : 'Mostrar';
}
</script>
<link rel="stylesheet" href="/css/change-password.css">
